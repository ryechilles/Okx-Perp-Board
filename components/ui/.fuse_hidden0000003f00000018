'use client';

import { ReactNode } from 'react';
import { TokenAvatar } from './TokenAvatar';
import { cn } from '@/lib/utils';

export interface TokenRowItemProps {
  /** Token symbol (e.g., "ETH") */
  symbol: string;
  /** Token logo URL */
  logo?: string;
  /** Click handler */
  onClick?: () => void;
  /** Optional rank number to display before avatar */
  rank?: number;
  /** Right-side content columns */
  rightContent: ReactNode;
  /** Additional className for the row */
  className?: string;
}

/**
 * TokenRowItem - Reusable token list item component
 *
 * Used in: RsiOversold, RsiOverbought, FundingKiller, AltcoinTopGainers
 *
 * @example
 * ```tsx
 * <TokenRowItem
 *   symbol="ETH"
 *   logo={logoUrl}
 *   onClick={() => onTokenClick('ETH')}
 *   rightContent={
 *     <>
 *       <span className="text-[11px] text-muted-foreground">{formatPrice(price)}</span>
 *       <span className="text-[12px] font-semibold text-green-500">+5.2%</span>
 *     </>
 *   }
 * />
 * ```
 */
export function TokenRowItem({
  symbol,
  logo,
  onClick,
  rank,
  rightContent,
  className,
}: TokenRowItemProps) {
  return (
    <div
      className={cn(
        'flex items-center justify-between py-1.5 rounded -mx-2 px-2',
        onClick && 'cursor-pointer hover:bg-muted/50',
        className
      )}
      onClick={onClick}
    >
      <div className="flex items-center gap-2">
        {rank !== undefined && (
          <span className="text-[11px] text-muted-foreground w-4">{rank}</span>
        )}
        <TokenAvatar symbol={symbol} logo={logo} />
        <span className="text-[12px] font-medium text-foreground">{symbol}</span>
      </div>
      <div className="flex items-center gap-3">
        {rightContent}
      </div>
    </div>
  );
}

/**
 * TokenRowSkeleton - Loading skeleton for TokenRowItem
 */
export function TokenRowSkeleton({
  showRank = false,
  columns = 2
}: {
  showRank?: boolean;
  columns?: number;
}) {
  return (
    <div className="flex items-center justify-between py-1.5">
      <div className="flex items-center gap-2">
        {showRank && <span className="text-[11px] text-muted-foreground w-4">-</span>}
        <div className="w-5 h-5 rounded-full bg-muted animate-pulse" />
        <div className="w-10 h-3 bg-muted rounded animate-pulse" />
      </div>
      <div className="flex items-center gap-3">
        {Array.from({ length: columns }).map((_, i) => (
          <div key={i} className="w-12 h-3 bg-muted rounded animate-pulse" />
        ))}
      </div>
    </div>
  );
}

/**
 * TokenRowEmpty - Empty state for token lists
 */
export function TokenRowEmpty({ message }: { message: string }) {
  return (
    <div className="text-center py-4 text-[11px] text-muted-foreground">
      {message}
    </div>
  );
}
